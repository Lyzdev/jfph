$(function(){
    // 账号渲染
var userid=localStorage.getItem("id");
if(userid){
    var user=localStorage.getItem("username");
    $(".myuser").html(user);
}

    $.ajax({
        type: "get",
        url: "http://172.16.16.127:8282/getuserinfo.php",
        data: {
            id:localStorage.getItem("id")
        },
        dataType: "json",
        success: function (response) {
            for(key in response){
                $(`#${key}`).html(response[key]);
            } 
            console.log(response) 
            drawPie(response)
            
        }
    });



    // echart

    function drawPie(response){
            // 基于准备好的dom，初始化echarts实例
     var myChart = echarts.init(document.getElementById('chart'));

     // 指定图表的配置项和数据
     var option = {
         tooltip: {
             trigger: 'item',
             formatter: "{a} <br/>{b}: {c} ({d}%)"
         },
         legend: {
             orient: 'vertical',
             x: 'left',
             data:['可用金额','冻结金额','总金额']
         },
         series: [
             {
                 name:'访问来源',
                 type:'pie',
                 radius: ['50%', '70%'],
                 avoidLabelOverlap: false,
                 label: {
                     normal: {
                         show: false,
                         position: 'center'
                     },
                     emphasis: {
                         show: true,
                         textStyle: {
                             fontSize: '30',
                             fontWeight: 'bold'
                         }
                     }
                 },
                 labelLine: {
                     normal: {
                         show: false
                     }
                 },
                 data:[
                     {value:response['usablemoney'], name:'可用金额'},
                     {value:response['blockedmoney'], name:'冻结金额'},
                     {value:response['totalmoney'], name:'总金额'},
                 ]
             }
         ]
     };
     
     // 使用刚指定的配置项和数据显示图表。
     myChart.setOption(option);

    }
    
 












})